<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"/>
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.data.site.profile.name }}</title>
    <link rel="icon" type="image/x-icon" href="{{ '/assets/favicon.png' | relative_url }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Space+Grotesk:wght@400;500&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    <script>
        window.addEventListener('scroll', () => {
            const header = document.querySelector('.site-header');
            if (window.scrollY > 0) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
    </script>
</head>
<body>
{% include site_header.html %}

{{ content }}

{% include site_footer.html %}
</body>

<script>
    window.onload = function () {
        console.log('loaded!')
        const imageGalleries = Array.from(document.querySelectorAll('.image-gallery-container'));
        imageGalleries.forEach(gallery => {
            const images = Array.from(gallery.querySelectorAll('img'));
            images.forEach(img => {
                console.log(img);
                const aspectRatio = img.width / img.height;
                img.parentElement.style.flex = aspectRatio;
            })
        })
    }
</script>

<script>
    window.enlarge = function (event) {
        const src = event.target.getAttribute('data-enlargable');
        const newDiv = document.createElement("div");
        const newImg = document.createElement("img");
        newImg.src = src;
        newImg.style.objectFit = 'contain';
        newImg.style.width = '100%';
        newDiv.append(newImg)
        const style = {
            backgroundColor: 'RGBA(0,0,0,.5)',
            // background: 'RGBA(0,0,0,.5) url('+src+') no-repeat center',
            // backgroundSize: 'contain',
            display: 'flex',
            width: '100%', height: '100%',
            position: 'fixed',
            zIndex: '10000',
            top: '0', left: '0',
            cursor: 'zoom-out',
            justifyContent: 'center'
        };

        Object.keys(style).forEach(key => newDiv.style[key] = style[key]);

        function end() {
            newDiv.remove();
            const body = document.querySelector('body');
            body.style.overflow = 'initial';
            body.removeEventListener('keydown', onEscape);
        }

        function onEscape(event) {
            if (event.key === "Escape") {
                end()
            }
        }

        const body = document.querySelector('body');
        body.addEventListener('keydown', onEscape)
        body.style.overflow = 'hidden';
        newDiv.onclick = end;
        document.querySelector('body').append(newDiv);
    }
</script>

</html>
